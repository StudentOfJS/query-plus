(function(l,d){typeof exports=="object"&&typeof module!="undefined"?d(exports,require("react"),require("idb-keyval")):typeof define=="function"&&define.amd?define(["exports","react","idb-keyval"],d):(l=typeof globalThis!="undefined"?globalThis:l||self,d(l.queryPlus={},l.React))})(this,function(l,d){"use strict";const a="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGwodCl7cmV0dXJuIG5ldyBQcm9taXNlKChlLG4pPT57dC5vbmNvbXBsZXRlPXQub25zdWNjZXNzPSgpPT5lKHQucmVzdWx0KSx0Lm9uYWJvcnQ9dC5vbmVycm9yPSgpPT5uKHQuZXJyb3IpfSl9ZnVuY3Rpb24gUyh0LGUpe2NvbnN0IG49aW5kZXhlZERCLm9wZW4odCk7bi5vbnVwZ3JhZGVuZWVkZWQ9KCk9Pm4ucmVzdWx0LmNyZWF0ZU9iamVjdFN0b3JlKGUpO2NvbnN0IHI9bChuKTtyZXR1cm4oYyxpKT0+ci50aGVuKG89Pmkoby50cmFuc2FjdGlvbihlLGMpLm9iamVjdFN0b3JlKGUpKSl9bGV0IHc7ZnVuY3Rpb24geSgpe3JldHVybiB3fHwodz1TKCJrZXl2YWwtc3RvcmUiLCJrZXl2YWwiKSksd31mdW5jdGlvbiBCKHQsZT15KCkpe3JldHVybiBlKCJyZWFkb25seSIsbj0+bChuLmdldCh0KSkpfWZ1bmN0aW9uIE4odCxlLG49eSgpKXtyZXR1cm4gbigicmVhZHdyaXRlIixyPT4oci5wdXQoZSx0KSxsKHIudHJhbnNhY3Rpb24pKSl9ZnVuY3Rpb24gUih0LGUsbj15KCkpe3JldHVybiBuKCJyZWFkd3JpdGUiLHI9Pm5ldyBQcm9taXNlKChjLGkpPT57ci5nZXQodCkub25zdWNjZXNzPWZ1bmN0aW9uKCl7dHJ5e3IucHV0KGUodGhpcy5yZXN1bHQpLHQpLGMobChyLnRyYW5zYWN0aW9uKSl9Y2F0Y2gobyl7aShvKX19fSkpfWZ1bmN0aW9uIFUodCxlPXkoKSl7cmV0dXJuIGUoInJlYWR3cml0ZSIsbj0+KG4uZGVsZXRlKHQpLGwobi50cmFuc2FjdGlvbikpKX1mdW5jdGlvbiB4KCl7Y29uc3Qgbj1TKCJ1c2VzdG9yZS1kYiIsInVzZXN0b3JlLWRiIik7cmV0dXJue3JlbW92ZTphPT5VKGEsbiksZ2V0RGF0YTphPT5CKGEsbiksc2V0RGF0YTooYSxoKT0+TihhLGgsbiksdXBkYXRlRGF0YTooYSxoKT0+UihhLGgsbil9fWNvbnN0IEk9KHQsZSk9PmU/dCtlPERhdGUubm93KCk6ITAsRD10PT50eXBlb2YgdD09Im9iamVjdCImJiFBcnJheS5pc0FycmF5KHQpJiZ0IT09bnVsbCxBPSh0LGUsbj17fSk9PihPYmplY3Qua2V5cyh0KS5mb3JFYWNoKHI9PntsZXQgYz1lP2UrIi4iK3I6cjtEKHRbcl0pP0EodFtyXSxjLG4pOm5bY109QXJyYXkuaXNBcnJheSh0W3JdKT90W3JdLnNvcnQoKTp0W3JdfSksT2JqZWN0LmVudHJpZXMobikuc29ydCgpKSxPPXQ9PnQuZmxhdE1hcChlPT5EKGUpP0EoZSk6W2VdKS5zb3J0KCksXz10PT57dmFyIGUsbjtyZXR1cm4obj0oZT10PT1udWxsP3ZvaWQgMDp0Lm1ldGhvZCk9PW51bGw/dm9pZCAwOmUudG9VcHBlckNhc2UoKSkhPW51bGw/bjoiR0VUIn0sVD0odCxlLG4pPT57bGV0IHI9QXJyYXkuaXNBcnJheSh0KT8iYXJyYXkiOnR5cGVvZiB0LGM9QXJyYXkuaXNBcnJheShlKT8iYXJyYXkiOnR5cGVvZiBlO3JldHVybiByIT09Yz8hMTpyIT09Im9iamVjdCImJnIhPT0iYXJyYXkiP3I9PT1jOm4mJnI9PT0ib2JqZWN0Ij9uLm1hcChpPT50W2ldPT09ZVtpXSkuZXZlcnkoaT0+aSk6KHI9PT0iYXJyYXkiJiYodD1PKHQpLGU9TyhlKSksIW4mJnI9PT0ib2JqZWN0IiYmKHQ9QSh0KSxlPUEoZSkpLEpTT04uc3RyaW5naWZ5KHQpPT09SlNPTi5zdHJpbmdpZnkoZSkpfSxDPXQ9PnQ/bmV3IEZ1bmN0aW9uKGByZXR1cm4gJHtkZWNvZGVVUkkodCl9YCkoKTplPT5lLHtyZW1vdmU6TCxnZXREYXRhOiQsc2V0RGF0YTpQLHVwZGF0ZURhdGE6Rn09eCgpLHA9dD0+e2lmKCF0Lm9rfHx0LnN0YXR1cz09PTQwNCl0aHJvdyBuZXcgRXJyb3IoYEhUVFAgZXJyb3IhIFN0YXR1czogJHt0LnN0YXR1c31gKTtpZih0LnN0YXR1cz09PTQwMyl0aHJvdyBuZXcgRXJyb3IoIlVuYXV0aG9yaXplZCEiKTtyZXR1cm4gdC5qc29uKCl9LEU9dD0+e3NlbGYucG9zdE1lc3NhZ2Uoe3R5cGU6dC5tZXNzYWdlfHwiVW5rbm93biBlcnJvciJ9KX07c2VsZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIix0PT57Y29uc3R7dHlwZTplfT10LmRhdGE7bGV0IG49bmV3IEFib3J0Q29udHJvbGxlcixyPW49PW51bGw/dm9pZCAwOm4uc2lnbmFsO2lmKGU9PT0iY2FuY2VsIiYmKG49PW51bGx8fG4uYWJvcnQoKSksZT09PSJwcmUtZmV0Y2giKXtsZXR7cHJlZmV0Y2g6Y309dC5kYXRhO2MuZm9yRWFjaCgoe21pZGRsZXdhcmU6aSx1cmw6byxvcHRpb25zOmEsbWF4QWdlOmh9KT0+e2xldCBNPUMoaSk7ZmV0Y2goby50b1N0cmluZygpLHtzaWduYWw6ciwuLi5hfSkudGhlbihwKS50aGVuKGQ9PntQKG8udG9TdHJpbmcoKSx7dGltZXN0YW1wOkRhdGUubm93KCksZGF0YTpNKGQpLG1heEFnZTpofSkudGhlbigoKT0+e2NvbnNvbGUubG9nKGBzYXZlZCBwcmVmZXRjaCAke299YCl9KS5jYXRjaChnPT57Y29uc29sZS5sb2coYGVycm9yIHNhdmluZyBwcmVmZXRjaCAke299YCxnKX0pfSkuY2F0Y2goKCk9Pntjb25zb2xlLmluZm8oIm5vIGRhdGEgZm91bmQiKX0pfSl9aWYoZT09PSJmZXRjaCIpe2xldHtleGlzdGluZ0RhdGE6YyxwcmVmZXJVc2VDYWNoZTppLHVybDpvLG9wdGlvbnM6YSxtYXhBZ2U6aCxtaWRkbGV3YXJlOk0sdXBkYXRlOmR9PXQuZGF0YTtjb25zdCBnPXM9PntzPUMoTSkocyksKCFjfHwhVChjLHMpKSYmKHNlbGYucG9zdE1lc3NhZ2Uoe3R5cGU6IkRBVEEiLGRhdGE6c30pLFAoby50b1N0cmluZygpLHtkYXRhOnMsdGltZXN0YW1wOkRhdGUubm93KCksbWF4QWdlOmh9KS50aGVuKCgpPT57Y29uc29sZS5pbmZvKCJzYXZlZCBkYXRhIil9KS5jYXRjaCgoKT0+e2NvbnNvbGUuaW5mbygiY291bGRuJ3QgYWNjZXNzIGluZGV4ZWREQiB0byBzYXZlIGRhdGEiKX0pKSxzZWxmLnBvc3RNZXNzYWdlKHt0eXBlOiJDT01QTEVURSJ9KX07bGV0IHU9XyhhKTt1PT09IkRFTEVURSImJihzZWxmLnBvc3RNZXNzYWdlKHt0eXBlOiJMT0FESU5HIn0pLEwoby50b1N0cmluZygpKSxmZXRjaChvLGEpLnRoZW4oKCk9PntkP2ZldGNoKGQudXJsLGQub3B0aW9ucykudGhlbihwKS50aGVuKGcpLmNhdGNoKHM9Pnt0aHJvdyBzfSk6c2VsZi5wb3N0TWVzc2FnZSh7dHlwZToiQ09NUExFVEUifSl9KS5jYXRjaChFKSksdT09PSJHRVQiJiYoJChvLnRvU3RyaW5nKCkpLnRoZW4ocz0+e2lmKCFzfHxJKHM9PW51bGw/dm9pZCAwOnMubWF4QWdlLHM9PW51bGw/dm9pZCAwOnMudGltZXN0YW1wKSlyZXR1cm4gc2VsZi5wb3N0TWVzc2FnZSh7dHlwZToiTE9BRElORyJ9KSwhcyYmY29uc29sZS5sb2coIm5vIHZhbHVlIGZvdW5kIikscyYmTChvLnRvU3RyaW5nKCkpLGZldGNoKG8sYT97Li4uYSxzaWduYWw6cn06e3NpZ25hbDpyfSkudGhlbihwKS50aGVuKGcpLmNhdGNoKEUpO2xldCBmPVQocz09bnVsbD92b2lkIDA6cy5kYXRhLGMpLG09e3R5cGU6aT8iREFUQSI6Zj8iQ0FDSEVEIjoiUFJFX0xPQUQiLGRhdGE6IWkmJmZ8fHM9PW51bGw/dm9pZCAwOnMuZGF0YX07c2VsZi5wb3N0TWVzc2FnZShtKX0pLmNhdGNoKHM9Pntjb25zb2xlLmluZm8ocz09bnVsbD92b2lkIDA6cy5tZXNzYWdlKSxpPSExfSksaXx8KHNlbGYucG9zdE1lc3NhZ2Uoe3R5cGU6IkxPQURJTkcifSksZmV0Y2gobyxhP3suLi5hLHNpZ25hbDpyfTp7c2lnbmFsOnJ9KS50aGVuKHApLnRoZW4oZykuY2F0Y2goRSkpKSwodT09PSJQVVQifHx1PT09IlBPU1QiKSYmKHNlbGYucG9zdE1lc3NhZ2Uoe3R5cGU6IkxPQURJTkcifSksZmV0Y2gobyxhP3suLi5hLHNpZ25hbDpyfTp7c2lnbmFsOnJ9KS50aGVuKHApLnRoZW4ocz0+e2Q/ZmV0Y2goZC51cmwsZC5vcHRpb25zKS50aGVuKHApLnRoZW4oZykuY2F0Y2goZj0+e3Rocm93IGZ9KTpGKG8udG9TdHJpbmcoKSxmPT57bGV0IG09RGF0ZS5ub3coKSxHPUQocykmJkQoZj09bnVsbD92b2lkIDA6Zi5kYXRhKT97Li4uZi5kYXRhLC4uLnN9OnM7cmV0dXJuIHNlbGYucG9zdE1lc3NhZ2Uoe3R5cGU6dSxkYXRhOkd9KSx7dGltZXN0YW1wOm0sbWF4QWdlOmgsZGF0YTpHfX0pLmNhdGNoKCgpPT57Y29uc29sZS5pbmZvKCJ1cGRhdGUgc3RvcmUgZmFpbGVkIil9KS5maW5hbGx5KCgpPT57c2VsZi5wb3N0TWVzc2FnZSh7dHlwZToiQ09NUExFVEUifSl9KX0pLmNhdGNoKEUpKX19KX0pKCk7Cg==",r=typeof window!="undefined"&&window.Blob&&new Blob([atob(a)],{type:"text/javascript;charset=utf-8"});function h(){const e=r&&(window.URL||window.webkitURL).createObjectURL(r);try{return e?new Worker(e,{}):new Worker("data:application/javascript;base64,"+a,{type:"module"})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const J={data:void 0,error:void 0,loading:!1,preload:!1,update:!0};function H(e,c){switch(c.type){case"pre-load":return{...e,data:c.data,loading:!1,preload:!0,error:void 0};case"data":return{...e,data:c.data,loading:!1,preload:!1,error:void 0};case"error":return{...e,error:c.error,loading:!1,preload:!1};case"loading":return{...e,loading:c.loading};default:return e}}const I=24*60*60*1e3;function U(e){e==null||e.postMessage({type:"cancel"}),e==null||e.terminate(),e=void 0}const X=e=>e?encodeURI(e.toString()):void 0;function v(){const[e,c]=d.useReducer(H,J),o=d.useRef(),t=async({url:s,options:Z,maxAge:m=I,preferUseCache:G,middleware:n})=>{let u=o.current;u==null||u.addEventListener("message",({data:{type:i,data:b}})=>{switch(i){case"LOADING":c({type:"loading",loading:!0});break;case"CACHED":case"COMPLETE":c({type:"loading",loading:!1});break;case"DATA":c({type:"data",data:b});break;case"PRE_LOAD":c({type:"pre-load",data:b});break;default:c({type:"error",error:new Error(i)});break}}),u==null||u.postMessage({type:"fetch",url:s,options:Z,existingData:e.data,middleware:X(n),maxAge:m,preferUseCache:G})};return d.useEffect(()=>(o.current=new h,()=>{U(o.current)}),[]),{fetchWorker:t,...e}}function Y(e){const c=d.useRef(new h);d.useEffect(()=>{var o;e&&c.current&&((o=c.current)==null||o.postMessage({type:"pre-fetch",prefetch:e.map(t=>({...t,middleware:X(t.middleware)}))}))},[e,c.current])}const E=({eventName:e,handler:c,options:o={}})=>{const t=d.useRef(),s=d.useRef(),{capture:Z,passive:m,once:G}=o,n=window.document.body;return d.useEffect(()=>{t.current=c},[c]),d.useEffect(()=>{if(!(n&&n.addEventListener))return;const i=K=>t.current&&t.current(K),b={capture:Z,passive:m,once:G};n.addEventListener(e,i,b);const p=()=>n.removeEventListener(e,i,b);return s.current=p,p},[e,n,Z,m,G]),[s.current]};function w({expandTarget:e=0,targetRef:c,prefetch:o,timeToExcecute:t=1e3}){const[s,Z]=d.useState(),[m,G]=d.useState(!1),n=d.useRef();Y(s);const[u]=E({eventName:"mousemove",handler:({clientX:i,clientY:b})=>{var R,S,T,k,y,W,V,f,L,N,C,P;let p=((S=(R=c.current)==null?void 0:R.offsetLeft)!=null?S:0)-e,K=((k=(T=c.current)==null?void 0:T.offsetLeft)!=null?k:0)+((W=(y=c.current)==null?void 0:y.offsetWidth)!=null?W:0)+e,Q=((f=(V=c.current)==null?void 0:V.offsetTop)!=null?f:0)-e,F=((N=(L=c.current)==null?void 0:L.offsetTop)!=null?N:0)+((P=(C=c.current)==null?void 0:C.offsetHeight)!=null?P:0)+e;i>p&&i<K&&b>Q&&b<F?(console.info("in target area"),n.current||(n.current=setTimeout(()=>{Z(o),G(!0),u&&u()},t))):n.current&&(clearTimeout(n.current),n.current=void 0)},options:{passive:!0,once:m}});d.useEffect(()=>()=>{clearTimeout(n.current)},[])}l.useFetch=v,l.useIntent=w,l.usePreFetch=Y,Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
