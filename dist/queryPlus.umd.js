(function(i,n){typeof exports=="object"&&typeof module!="undefined"?n(exports,require("react"),require("idb-keyval")):typeof define=="function"&&define.amd?define(["exports","react","idb-keyval"],n):(i=typeof globalThis!="undefined"?globalThis:i||self,n(i.queryPlus={},i.React))})(this,function(i,n){"use strict";const h="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHAodCl7cmV0dXJuIG5ldyBQcm9taXNlKChlLG4pPT57dC5vbmNvbXBsZXRlPXQub25zdWNjZXNzPSgpPT5lKHQucmVzdWx0KSx0Lm9uYWJvcnQ9dC5vbmVycm9yPSgpPT5uKHQuZXJyb3IpfSl9ZnVuY3Rpb24gVCh0LGUpe2NvbnN0IG49aW5kZXhlZERCLm9wZW4odCk7bi5vbnVwZ3JhZGVuZWVkZWQ9KCk9Pm4ucmVzdWx0LmNyZWF0ZU9iamVjdFN0b3JlKGUpO2NvbnN0IHI9cChuKTtyZXR1cm4oYSxjKT0+ci50aGVuKG89PmMoby50cmFuc2FjdGlvbihlLGEpLm9iamVjdFN0b3JlKGUpKSl9bGV0IG07ZnVuY3Rpb24gRCgpe3JldHVybiBtfHwobT1UKCJrZXl2YWwtc3RvcmUiLCJrZXl2YWwiKSksbX1mdW5jdGlvbiBHKHQsZT1EKCkpe3JldHVybiBlKCJyZWFkb25seSIsbj0+cChuLmdldCh0KSkpfWZ1bmN0aW9uIFIodCxlLG49RCgpKXtyZXR1cm4gbigicmVhZHdyaXRlIixyPT4oci5wdXQoZSx0KSxwKHIudHJhbnNhY3Rpb24pKSl9ZnVuY3Rpb24gVSh0LGUsbj1EKCkpe3JldHVybiBuKCJyZWFkd3JpdGUiLHI9Pm5ldyBQcm9taXNlKChhLGMpPT57ci5nZXQodCkub25zdWNjZXNzPWZ1bmN0aW9uKCl7dHJ5e3IucHV0KGUodGhpcy5yZXN1bHQpLHQpLGEocChyLnRyYW5zYWN0aW9uKSl9Y2F0Y2gobyl7YyhvKX19fSkpfWZ1bmN0aW9uIHgodCxlPUQoKSl7cmV0dXJuIGUoInJlYWR3cml0ZSIsbj0+KG4uZGVsZXRlKHQpLHAobi50cmFuc2FjdGlvbikpKX1mdW5jdGlvbiBOKCl7Y29uc3Qgbj1UKCJ1c2VzdG9yZS1kYiIsInVzZXN0b3JlLWRiIik7cmV0dXJue3JlbW92ZTppPT54KGksbiksZ2V0RGF0YTppPT5HKGksbiksc2V0RGF0YTooaSxoKT0+UihpLGgsbiksdXBkYXRlRGF0YTooaSxoKT0+VShpLGgsbil9fWNvbnN0IF89KHQsZSk9PmU/dCtlPERhdGUubm93KCk6ITAsQT10PT50eXBlb2YgdD09Im9iamVjdCImJiFBcnJheS5pc0FycmF5KHQpJiZ0IT09bnVsbCxFPSh0LGUsbj17fSk9PihPYmplY3Qua2V5cyh0KS5mb3JFYWNoKHI9PntsZXQgYT1lP2UrIi4iK3I6cjtBKHRbcl0pP0UodFtyXSxhLG4pOm5bYV09QXJyYXkuaXNBcnJheSh0W3JdKT90W3JdLnNvcnQoKTp0W3JdfSksT2JqZWN0LmVudHJpZXMobikuc29ydCgpKSxPPXQ9PnQuZmxhdE1hcChlPT5BKGUpP0UoZSk6W2VdKS5zb3J0KCksST10PT57dmFyIGUsbjtyZXR1cm4obj0oZT10PT1udWxsP3ZvaWQgMDp0Lm1ldGhvZCk9PW51bGw/dm9pZCAwOmUudG9VcHBlckNhc2UoKSkhPW51bGw/bjoiR0VUIn0sQz0odCxlLG4pPT57bGV0IHI9QXJyYXkuaXNBcnJheSh0KT8iYXJyYXkiOnR5cGVvZiB0LGE9QXJyYXkuaXNBcnJheShlKT8iYXJyYXkiOnR5cGVvZiBlO3JldHVybiByIT09YT8hMTpyIT09Im9iamVjdCImJnIhPT0iYXJyYXkiP3I9PT1hOm4mJnI9PT0ib2JqZWN0Ij9uLm1hcChjPT50W2NdPT09ZVtjXSkuZXZlcnkoYz0+Yyk6KHI9PT0iYXJyYXkiJiYodD1PKHQpLGU9TyhlKSksIW4mJnI9PT0ib2JqZWN0IiYmKHQ9RSh0KSxlPUUoZSkpLEpTT04uc3RyaW5naWZ5KHQpPT09SlNPTi5zdHJpbmdpZnkoZSkpfSxMPXQ9PnQ/bmV3IEZ1bmN0aW9uKGByZXR1cm4gJHtkZWNvZGVVUkkodCl9YCkoKTplPT5lLHtyZW1vdmU6UCxnZXREYXRhOiQsc2V0RGF0YTpCLHVwZGF0ZURhdGE6Rn09TigpLGc9dD0+e2lmKCF0Lm9rfHx0LnN0YXR1cz09PTQwNCl0aHJvdyBuZXcgRXJyb3IoYEhUVFAgZXJyb3IhIFN0YXR1czogJHt0LnN0YXR1c31gKTtpZih0LnN0YXR1cz09PTQwMyl0aHJvdyBuZXcgRXJyb3IoIjQwMyBVbmF1dGhvcml6ZWQiKTtyZXR1cm4gdC5qc29uKCl9LFM9dD0+e3NlbGYucG9zdE1lc3NhZ2Uoe3R5cGU6dC5tZXNzYWdlfHwiVW5rbm93biBlcnJvciJ9KX07c2VsZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixhc3luYyB0PT57Y29uc3R7dHlwZTplfT10LmRhdGE7bGV0IG49bmV3IEFib3J0Q29udHJvbGxlcixyPW49PW51bGw/dm9pZCAwOm4uc2lnbmFsO2lmKGU9PT0iY2FuY2VsIiYmKG49PW51bGx8fG4uYWJvcnQoKSksZT09PSJwcmUtZmV0Y2giKXtsZXR7cHJlZmV0Y2g6YX09dC5kYXRhO2EuZm9yRWFjaCgoe21pZGRsZXdhcmU6Yyx1cmw6byxvcHRpb25zOmksbWF4QWdlOmh9KT0+e2xldCBNPUwoYyk7ZmV0Y2goby50b1N0cmluZygpLHtzaWduYWw6ciwuLi5pfSkudGhlbihnKS50aGVuKGQ9PntCKG8udG9TdHJpbmcoKSx7dGltZXN0YW1wOkRhdGUubm93KCksZGF0YTpNKGQpLG1heEFnZTpofSkudGhlbigoKT0+e2NvbnNvbGUubG9nKGBzYXZlZCBwcmVmZXRjaCAke299YCl9KS5jYXRjaChsPT57Y29uc29sZS5sb2coYGVycm9yIHNhdmluZyBwcmVmZXRjaCAke299YCxsKX0pfSkuY2F0Y2goKCk9Pntjb25zb2xlLmluZm8oIm5vIGRhdGEgZm91bmQiKX0pfSl9aWYoZT09PSJmZXRjaCIpe2xldHtleGlzdGluZ0RhdGE6YSxwcmVmZXJVc2VDYWNoZTpjLHVybDpvLG9wdGlvbnM6aSxtYXhBZ2U6aCxtaWRkbGV3YXJlOk0sdXBkYXRlOmR9PXQuZGF0YTtjb25zdCBsPWY9PntmPUwoTSkoZiksKCFhfHwhQyhhLGYpKSYmKHNlbGYucG9zdE1lc3NhZ2Uoe3R5cGU6IkRBVEEiLGRhdGE6Zn0pLEIoby50b1N0cmluZygpLHtkYXRhOmYsdGltZXN0YW1wOkRhdGUubm93KCksbWF4QWdlOmh9KS50aGVuKCgpPT57Y29uc29sZS5pbmZvKCJzYXZlZCBkYXRhIil9KS5jYXRjaCgoKT0+e2NvbnNvbGUuaW5mbygiY291bGRuJ3QgYWNjZXNzIGluZGV4ZWREQiB0byBzYXZlIGRhdGEiKX0pKSxzZWxmLnBvc3RNZXNzYWdlKHt0eXBlOiJDT01QTEVURSJ9KX07bGV0IHU9SShpKTtpZih1PT09IkRFTEVURSImJihzZWxmLnBvc3RNZXNzYWdlKHt0eXBlOiJMT0FESU5HIn0pLFAoby50b1N0cmluZygpKSxmZXRjaChvLGkpLnRoZW4oKCk9PntkP2ZldGNoKGQudXJsLGQub3B0aW9ucykudGhlbihnKS50aGVuKGwpLmNhdGNoKGY9Pnt0aHJvdyBmfSk6c2VsZi5wb3N0TWVzc2FnZSh7dHlwZToiQ09NUExFVEUifSl9KS5jYXRjaChTKSksdT09PSJHRVQiKXtsZXQgZj1hd2FpdCAkKG8udG9TdHJpbmcoKSkudGhlbihzPT57aWYoIXN8fF8ocz09bnVsbD92b2lkIDA6cy5tYXhBZ2Uscz09bnVsbD92b2lkIDA6cy50aW1lc3RhbXApKXJldHVybiFzJiZjb25zb2xlLmxvZygibm8gdmFsdWUgZm91bmQiKSxzJiZQKG8udG9TdHJpbmcoKSksITA7bGV0IHk9QyhzPT1udWxsP3ZvaWQgMDpzLmRhdGEsYSksdz17dHlwZTpjPyJEQVRBIjp5PyJDQUNIRUQiOiJQUkVfTE9BRCIsZGF0YTohYyYmeXx8cz09bnVsbD92b2lkIDA6cy5kYXRhfTtyZXR1cm4gc2VsZi5wb3N0TWVzc2FnZSh3KSwhMX0pLmNhdGNoKHM9Pntjb25zb2xlLmluZm8ocz09bnVsbD92b2lkIDA6cy5tZXNzYWdlKSxjPSExfSk7KCFjfHxmKSYmKHNlbGYucG9zdE1lc3NhZ2Uoe3R5cGU6IkxPQURJTkcifSksZmV0Y2gobyxpP3suLi5pLHNpZ25hbDpyfTp7c2lnbmFsOnJ9KS50aGVuKGcpLnRoZW4obCkuY2F0Y2goUykpfSh1PT09IlBVVCJ8fHU9PT0iUE9TVCIpJiYoc2VsZi5wb3N0TWVzc2FnZSh7dHlwZToiTE9BRElORyJ9KSxmZXRjaChvLGk/ey4uLmksc2lnbmFsOnJ9OntzaWduYWw6cn0pLnRoZW4oZykudGhlbihmPT57ZD9mZXRjaChkLnVybCxkLm9wdGlvbnMpLnRoZW4oZykudGhlbihsKS5jYXRjaChzPT57dGhyb3cgc30pOkYoby50b1N0cmluZygpLHM9PntsZXQgeT1EYXRlLm5vdygpLHc9QShmKSYmQShzPT1udWxsP3ZvaWQgMDpzLmRhdGEpP3suLi5zLmRhdGEsLi4uZn06ZjtyZXR1cm4gc2VsZi5wb3N0TWVzc2FnZSh7dHlwZTp1LGRhdGE6d30pLHt0aW1lc3RhbXA6eSxtYXhBZ2U6aCxkYXRhOnd9fSkuY2F0Y2goKCk9Pntjb25zb2xlLmluZm8oInVwZGF0ZSBzdG9yZSBmYWlsZWQiKX0pLmZpbmFsbHkoKCk9PntzZWxmLnBvc3RNZXNzYWdlKHt0eXBlOiJDT01QTEVURSJ9KX0pfSkuY2F0Y2goUykpfX0pfSkoKTsK",r=typeof window!="undefined"&&window.Blob&&new Blob([atob(h)],{type:"text/javascript;charset=utf-8"});function K(){const e=r&&(window.URL||window.webkitURL).createObjectURL(r);try{return e?new Worker(e,{}):new Worker("data:application/javascript;base64,"+h,{type:"module"})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}const I={data:void 0,error:void 0,loading:!1,preload:!1,update:!0};function N(e,d){switch(d.type){case"pre-load":return{...e,data:d.data,loading:!1,preload:!0,error:void 0};case"data":return{...e,data:d.data,loading:!1,preload:!1,error:void 0};case"error":return{...e,error:d.error,loading:!1,preload:!1};case"loading":return{...e,loading:d.loading};default:return e}}const H=24*60*60*1e3;function v(e){e==null||e.postMessage({type:"cancel"}),e==null||e.terminate(),e=void 0}const Y=e=>e?encodeURI(e.toString()):void 0;function U(){const[e,d]=n.useReducer(N,I),t=n.useRef(),o=async({url:b,options:Z,maxAge:m=H,preferUseCache:p,middleware:c})=>{let l=t.current;l==null||l.addEventListener("message",({data:{type:u,data:s}})=>{switch(u){case"LOADING":d({type:"loading",loading:!0});break;case"CACHED":case"COMPLETE":d({type:"loading",loading:!1});break;case"DATA":d({type:"data",data:s});break;case"PRE_LOAD":d({type:"pre-load",data:s});break;default:d({type:"error",error:new Error(u)});break}}),l==null||l.postMessage({type:"fetch",url:b,options:Z,existingData:e.data,middleware:Y(c),maxAge:m,preferUseCache:p})};return n.useEffect(()=>(t.current=new K,()=>{v(t.current)}),[]),{fetchWorker:o,...e}}function X(e){const d=n.useRef(new K);n.useEffect(()=>{var t;e&&d.current&&((t=d.current)==null||t.postMessage({type:"pre-fetch",prefetch:e.map(o=>({...o,middleware:Y(o.middleware)}))}))},[e,d.current])}const g=({eventName:e,handler:d,options:t={}})=>{const o=n.useRef(),b=n.useRef(),{capture:Z,passive:m,once:p}=t,c=window.document.body;return n.useEffect(()=>{o.current=d},[d]),n.useEffect(()=>{if(!(c&&c.addEventListener))return;const u=a=>o.current&&o.current(a),s={capture:Z,passive:m,once:p};c.addEventListener(e,u,s);const G=()=>c.removeEventListener(e,u,s);return b.current=G,G},[e,c,Z,m,p]),[b.current]};function Q({expandTarget:e=0,targetRef:d,prefetch:t,timeToExcecute:o=1e3}){const[b,Z]=n.useState(),[m,p]=n.useState(!1),c=n.useRef();X(b);const[l]=g({eventName:"mousemove",handler:({clientX:u,clientY:s})=>{var y,R,T,k,S,W,f,V,L,P,J,C;let G=((R=(y=d.current)==null?void 0:y.offsetLeft)!=null?R:0)-e,a=((k=(T=d.current)==null?void 0:T.offsetLeft)!=null?k:0)+((W=(S=d.current)==null?void 0:S.offsetWidth)!=null?W:0)+e,F=((V=(f=d.current)==null?void 0:f.offsetTop)!=null?V:0)-e,z=((P=(L=d.current)==null?void 0:L.offsetTop)!=null?P:0)+((C=(J=d.current)==null?void 0:J.offsetHeight)!=null?C:0)+e;u>G&&u<a&&s>F&&s<z?(console.info("in target area"),c.current||(c.current=setTimeout(()=>{Z(t),p(!0),l&&l()},o))):c.current&&(clearTimeout(c.current),c.current=void 0)},options:{passive:!0,once:m}});n.useEffect(()=>()=>{clearTimeout(c.current)},[])}i.useFetch=U,i.useIntent=Q,i.usePreFetch=X,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
